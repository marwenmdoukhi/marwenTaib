<p-toast position="top-right"></p-toast>
<CreateSignataireComponent [vm]="vm" *ngIf="displayModalSignataire==true"></CreateSignataireComponent>
<createAvocat [vm]="vm" *ngIf="displayModalAvocat==true"></createAvocat>
<searchAvocat [vm]="vm" *ngIf="displaySearchAvocat==true"></searchAvocat>
<displayComments [vm]="vm" *ngIf="vm.displayComments==true"></displayComments>
<consultActArchive [vm]="vm" *ngIf="vm.displayArchive==true"></consultActArchive>

<div class="search-header" [@slideInOut] *ngIf="!displayModalSignataire && !displayModalAvocat && !vm.displayComments  && !vm.displayAllResult && !vm.displayArchive&& !displaySearchAvocat">
    <button class="btn burger-menu-btn visible-xs-block" (click)="vm.toggleSidebar()">
        <img alt="" src="logo/burger.svg" />
    </button>
    <div class="search-input"  [ngClass]="vm.inputReasearchBar ? 'search-focused' : ''">
        <input type="text" id="input" [(ngModel)]="vm.inputReasearchBar"
               pInputText (focus)="vm.displayDivForReasearchBar=true"
               placeholder="Chercher un acte, un document, un contact" />
        <img alt="" src="/logo/search.svg" />
        <span *ngIf="vm.inputReasearchBar" class="glyphicon glyphicon-remove-sign" (click)="vm.displayDivForReasearchBar=false;vm.inputReasearchBar=null" style=" cursor:pointer; float: right; margin-top: -3%; margin-right: 1%;"></span>
        <div *ngIf="vm.displayDivForReasearchBar" class="role-name-barre-recherche">
            <div *ngFor="let c of (vm.allData | barPipe : vm.inputReasearchBar | slice:0:10)" (click)="vm.assignActeModel(c)" style="padding-left: 65px;">
                <span *ngIf="c.nameActe" [inlineSVG]="'/logo/en-attente.svg'" style="margin-right: 2%;"></span> <span *ngIf="c.nameActe" class="Affaire-Pauline-Grin">{{c.nameActe}}</span><span class="dfendeur" style="margin-left: 1%;" *ngIf="c.nameActe">acte</span>
                <span *ngIf="c.contactName" [inlineSVG]="'/logo/yellow.svg'" style="margin-right: 2%;"></span><span *ngIf="c.contactName" class="Affaire-Pauline-Grin">{{c.contactLastName | titlecase}} {{c.contactName | uppercase}} contact</span><span style="margin-left: 1%;" class="dfendeur" *ngIf="c.contactName">contact</span>
                <span *ngIf="c.documentName" [inlineSVG]="'/logo/document.svg'" style="margin-right: 2%;"></span><span *ngIf="c.documentName" class="Affaire-Pauline-Grin">{{c.documentName}}.pdf </span><span style="margin-left: 1%;" class="dfendeur" *ngIf="c.documentName">document</span>
            </div>
            <div *ngIf="vm.inputReasearchBar" class="role-name-barre-recherche" style="padding-top: 5px;border-bottom-left-radius: 6px; border-bottom-right-radius: 6px;border-top: 1px solid #dadada;">
                <span class="Voir-tous-les-rsult" (click)="vm.displayAllResult=true;vm.displayDivForReasearchBar=false;" style="cursor:pointer;margin-left: 55px">Voir tous les résultats pour « {{vm.inputReasearchBar}} »</span>
            </div>
        </div>
    </div>
</div>

<div  class="main-content" [ngClass]="vm.inputReasearchBar ? 'overlay' : ''" [@slideInOut] *ngIf="!displayModalSignataire && !displayModalAvocat && !displaySearchAvocat && !vm.displayComments  && !vm.displayAllResult && !vm.displayArchive">
    <div class="container-fluid">

        <div class="row">

            <div class="add-act-header">
                <div>
                    <span class="glyphicon glyphicon-chevron-left back-title-chevron"
                          (click)="displayCreateOrder=false;displayConsultOrder=false;displaySendTovalidation=false;"></span>
                    <span class="add-act-title" *ngIf="!displaySendTovalidation">Synthèse</span>
                    <span class="add-act-title" *ngIf="displaySendTovalidation && currentActe.status=='Cree'">Envoyer pour validation</span>
                    <span class="add-act-title" *ngIf="displaySendTovalidation && currentActe.status !='Cree'">Synthèse</span>
                </div>


                <div class="dropdown" style="margin-right: 1%;">
                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                        Actions de l'acte
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li style="cursor:pointer" *ngIf="(currentActe.status=='En Projet' || currentActe.status=='Abandonne') && readyOnlyForUser==true"><a (click)="vm.onDeleteActe(currentActe)">Supprimer l'acte</a></li>
                        <li style="cursor:pointer" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && (currentActe.status=='Cree' || currentActe.status=='En cours de validation' || currentActe.status=='En cours de signature' || currentActe.status=='Signature refusee' || currentActe.status=='Validation refusee') && readyOnlyForUser==true"><a data-target="#dismissActeModal" data-toggle="modal">Abandonner un acte</a></li>
                        <li style="cursor:pointer" *ngIf="currentActe.status!='En Projet'"><a (click)="vm.downloadSynthese()">Télécharger la synthèse</a></li>
                        <li style="cursor:pointer"><a (click)="vm.displayArchive=true">Historique de l'acte</a></li>
                        <li style="cursor:pointer" *ngIf="currentActe.status=='En cours de validation' && readyOnlyForUser==true"><a (click)="sendMailRelance()">Relance de validation</a></li>
                        <li style="cursor:pointer" *ngIf="currentActe.status=='En cours de signature' && readyOnlyForUser==true"><a (click)="sendMailSignRelance()">Relance de signature</a></li>
                    </ul>
                </div>
            </div>
            <hr />
        </div>

        <div>

            <div class="row">
                <div class="add-form-steps">

                    <div class="add-form-content">
                        <div class="">
                            <span class="synth-section-title">Informations</span>
                            <div class="synthese-info hidden-xs">
                                <div>
                                    <span class="info-title">Numéro de l'acte</span>
                                    <span>{{currentActe.folderNumber}}</span>
                                </div>
                                <div>
                                    <span class="info-title">Nom de l'acte</span>
                                    <span>{{currentActe.name}}</span>
                                </div>
                                <div>
                                    <span class="info-title">Nom du dossier</span>
                                    <span>{{currentActe.folderName}}</span>
                                </div>
                                <div>
                                    <span class="info-title">Numéro interne du dossier</span>
                                    <span>{{currentActe.internalNumber}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="visible-xs-block responsive-info-section">
                            <div class="row mb-10">
                                <div class="col-xs-12">
                                    <div class="info-title">N° de l'acte</div>
                                    <div class="truncate-txt">{{currentActe.folderNumber}}</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-4 pr-5">
                                    <div class="info-title">Nom de l'acte</div>
                                    <div class="truncate-txt">{{currentActe.name}}</div>
                                </div>
                                <div class="col-xs-4 pr-5 pl-5 side-bordered">
                                    <div class="info-title">Nom du dossier</div>
                                    <div class="truncate-txt">{{currentActe.folderName}}</div>
                                </div>
                                <div class="col-xs-4 pl-5">
                                    <div class="info-title">Numéro interne du dossier</div>
                                    <div class="truncate-txt">{{currentActe.internalNumber}}</div>
                                </div>
                            </div>
                        </div>

                        <div class="status-section">
                            <span class="status-title">Statut: {{vm.getStatut(currentActe['status'])}} {{testDeadLine(currentActe.receptionDate, currentActe.expirationDate, vm.getStatut(currentActe['status']))}}</span>
                            <span *ngIf="currentActe.lastResentDate">Date de dernière relance {{currentActe.lastResentDate}}</span>
                            <span>Créé le {{vm.getRequestDate(currentActe)}}</span>
                            <span *ngIf="displayComments && currentActe.status=='En cours de validation'" style="text-align: right;color: #1d1e26; float: right;margin-right:15px"><u class="Visualliser-le-comme" style="cursor:pointer" (click)="vm.displayComments=true">Visualiser le commentaire</u> </span>
                        </div>

                        <div class="validation-desc" *ngIf="displaySendTovalidation && (currentActe.status=='En cours de validation' || currentActe.status=='Cree')">
                            <p class="validation-desc-title">Définir les validateurs :</p>
                            <p>Cocher les validateurs de l'acte parmi les Signataire(s) et les Avocat(s) validateur(s)</p>
                        </div>


                        <div class="mt-30">
                            <span class="synth-section-title">Signataire(s)</span>
                            <div class="create-folder-section border-grey" (click)="displayModalSignataire=true;" *ngIf="(displaySendTovalidation || currentActe.status=='En cours de validation') && currentActe.status!='En cours de signature' && readyOnlyForUser===true">
                                <img src="/logo/active.svg" class="active" alt="add folder" />
                                <span>Ajouter un signataire</span>
                            </div>
                            <div *ngFor="let item of listSignataire; index as i">
                                <div class="responsive-contacts-row">
                                    <div class="hidden-xs large-contacts-row">
                                        <div class="col-md-4 pl-0 truncate-txt">
                                            <label *ngIf="(currentActe.status!='En cours de signature' || item.validator) &&!(item.validator==true && item.mailSent==true && item.actId == currentActe.id ) " class="pure-material-checkbox">
                                                <input #inputElSig type="checkbox" [disabled]="disabledCheckBox(item)==true" [checked]="item.validator==true && item.mailSent==true && item.actId == currentActe.id" (change)="item.validator=inputElSig.checked">
                                                <span></span>
                                            </label>
                                            <img alt="" src="/logo/moral.svg">
                                            <span tooltip=" {{item.lastName.charAt(0).toUpperCase()+item.lastName.slice(1)}} {{item.name | uppercase}}" placement="top" show-delay="200">
                                                <span class="capitalize-text">{{item.lastName}}</span> {{item.name | uppercase}}
                                            </span>
                                        </div>
                                        <p class="col-md-2" *ngIf="item.validator==true && item.mailSent==true && item.actId == currentActe.id ">Validateur</p>

                                        <p class="col-md-4" [innerHTML]=dateValidatedOrRefused(item)> </p>

                                        <p class="col-md-4" [innerHTML]="dateSigneddOrRefused(item)"></p>

                                        <div class="col-md-2">
                                            <div class="pull-right" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status !='Cree'" [ngClass]="{'col-md-1': currentActe.status=='En cours de validation' || currentActe.status=='En cours de signature'}">
                                                <img alt="" src="/logo/options.svg" (click)="showDropdown('myDropdown1' + item.id)" class="cursor-pointer" />
                                                <div id="myDropdown1" class="dropdown-content" style="cursor:pointer; width: 170px;margin-left: -145px" [attr.id]="'myDropdown1' + item.id" *ngIf="readyOnlyForUser==true">
                                                    <a [ngClass]="{'isDisabled': currentActe.status=='En cours de validation' && item.validatedAt }" *ngIf="!(disabledResent(item)==false || currentActe.status!='En cours de validation') && item.mailSent" (click)="showDropdown('myDropdown' + item.email);sendMailRelance(item)" style="float:left;cursor:pointer;font-size: 12px;">Relancer pour validation</a>
                                                    <a [ngClass]="{'isDisabled': (currentActe.status=='En cours de signature' && isAvocat(item)) ||(currentActe.status=='En cours de signature' && item.signedAt)}" *ngIf="currentActe.status=='En cours de signature'" (click)="showDropdown('myDropdown' + item.email);sendMailSignRelance(item)" style="cursor:pointer;font-size: 12px;float: left">Relancer pour signature</a>
                                                    <a *ngIf="!(disabledCheckBox(item)==true || currentActe.status=='En cours de signature')" (click)="showDropdown('myDropdown' + item.email);deleteSignatairePopup()" attr.data-target="#idSignataire{{item.id}}" data-toggle="modal" style="float:left;cursor:pointer;font-size: 12px;">Supprimer le signataire</a>
                                                </div>
                                            </div>
                                            <div class="pull-right" *ngIf="currentActe.status=='Cree' ">
                                                <span [inlineSVG]="'/logo/edit.svg'" (click)="signataireToModify(item);displayModalSignataire=true"></span>
                                                <span [inlineSVG]="'/logo/delete.svg'" (click)="deleteSignataire(item)"></span>
                                            </div>
                                            <div class="pull-right ">
                                                <img alt="" src="/logo/down.svg" data-toggle="collapse" attr.data-target="#{{item.id}}" style="cursor:pointer">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal fade" id="idSignataire{{item.id}}" role="dialog" *ngIf="displayPopupForDeleteSignatory==true" data-backdrop="static" data-keyboard="false"  style="display: none;">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div style="text-align:center">
                                                    <div class="modal-body Votre-dossier-dacte " style="text-align:center;height: auto;margin-left: 34px;margin-top: 100px;">
                                                        Êtes-vous sûr de vouloir supprimer {{item.name}} ?
                                                        <div style="text-align:center;margin-top: 10%;">
                                                            <button form="information" type="submit" class="btn  next-button" (click)="deleteSignataire(item)" style="margin-right: 5%;">Oui</button>
                                                            <button  form="information" type="button" class="btn  save-button" (click)="displayConsultOrder=true" data-dismiss="modal">Retour</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="visible-xs-block xs-contacts-row container-fluid">
                                        <div class="row">
                                            <div class="col-xs-5 truncate-txt">
                                                <div style="display: inline-block">
                                                    <label *ngIf="(currentActe.status!='En cours de signature' || item.validator)" class="pure-material-checkbox">
                                                        <input #inputElSig type="checkbox" [disabled]="disabledCheckBox(item)==true" [checked]="item.validator==true && item.mailSent==true && item.actId == currentActe.id " (change)="item.validator=inputElSig.checked">
                                                        <span></span>
                                                    </label>
                                                </div>
                                                <div style="display: contents">
                                                    <span tooltip=" {{item.lastName | titlecase}} {{item.name | uppercase}}" placement="top" show-delay="200">
                                                        <span class="capitalize-text">{{item.lastName}}</span> {{item.name | uppercase}}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xs-5 ">
                                                <span class="col-md-4" [innerHTML]=dateValidatedOrRefused(item)> </span>
                                            </div>
                                            <div class="col-xs-1">
                                                <div *ngIf="dateSigneddOrRefused(item).length !='' " style="margin-top:5px;">
                                                    <img alt="" src="/logo/down.svg" data-toggle="collapse" attr.data-target="#{{item.name}}">
                                                </div>
                                            </div>
                                            <div class="pull-right p-relative" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status =='Cree'">
                                                <img alt="" src="/logo/options.svg" (click)="showDropdown('dropdownSignataire2' + item.email)" class="cursor-pointer" />
                                                <div id="dropdownSignataire2" class="dropdown-content" style="cursor:pointer;margin-left: -66px" [attr.id]="'dropdownSignataire2' + item.email">
                                                    <a style="cursor:pointer;font-size: 12px;" (click)="signataireToModify(item);displayModalSignataire=true">Modifier</a>
                                                    <a style="cursor:pointer;font-size: 12px;" (click)="deleteSignataire(item)" data-target="#deleteSign" data-toggle="modal">Supprimer</a>
                                                </div>
                                            </div>
                                            <div class="pull-right" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status=='En cours de signature'">
                                                <img alt="" src="/logo/down.svg" data-toggle="collapse" attr.data-target="#{{item.id}}" style="cursor:pointer;margin-left: -61px">
                                            </div>
                                            <div class="pull-right" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status=='Cree'">
                                                <img alt="" src="/logo/down.svg" data-toggle="collapse" attr.data-target="#{{item.id}}" style="cursor:pointer;margin-left: -33px">
                                            </div>
                                            <div class="col-xs-1 pr-0 pl-0" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status !='Cree'" [ngClass]="{'col-md-1': currentActe.status=='En cours de validation' || currentActe.status=='En cours de signature'}">
                                                <img alt="" src="/logo/options.svg" (click)="showDropdown('resSignmyDropdown' + item.email)" class="cursor-pointer" />
                                                <div id="resSignmyDropdown" class="dropdown-content" style="cursor:pointer; width: 160px;margin-left: -137px" [attr.id]="'resSignmyDropdown' + item.email">
                                                    <a [ngClass]="{'isDisabled': currentActe.status=='En cours de validation' && item.validatedAt }" *ngIf="!(disabledResent(item)==false || currentActe.status!='En cours de validation') && item.mailSent" (click)="showDropdown('myDropdown' + item.email);sendMailRelance(item)" style="float:left;cursor:pointer;font-size: 12px;">Relancer pour validation</a>
                                                    <a [ngClass]="{'isDisabled': (currentActe.status=='En cours de signature' && isAvocat(item)) ||(currentActe.status=='En cours de signature' && item.signedAt)}" *ngIf="currentActe.status=='En cours de signature'" (click)="showDropdown('myDropdown' + item.email);sendMailSignRelance(item)" style="cursor:pointer;font-size: 12px;float: left">Relancer pour signature</a>
                                                    <a *ngIf="!(disabledCheckBox(item)==true || currentActe.status=='En cours de signature')" (click)="showDropdown('myDropdown' + item.email);deleteSignataire(item)" style="float:left;cursor:pointer;font-size: 12px;">Supprimer le signataire</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                    <div id="{{item.id}}" class="collapse-info collapse">
                                        <div class="row p-10">
                                            <div class="col-md-3 col-xs-6">
                                                <span class="responsive-info-shift"> {{item.codeCountry}} {{item.phoneNumber}}</span>
                                            </div>
                                            <div class="col-md-4 truncate-txt col-xs-6">
                                                <span tooltip=" {{item.email}}" placement="top" show-delay="200"> {{item.email}} </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                        <div class="mt-30">
                            <span class="synth-section-title">Avocat(s) validateur</span>
                            <div class="create-folder-section border-grey " (click)="displaySearchAvocat=true;" *ngIf="(displaySendTovalidation || currentActe.status=='En cours de validation') && currentActe.status!='En cours de signature' && readyOnlyForUser===true">
                                <img src="/logo/active.svg" class="active" alt="add folder" />
                                <span>Ajouter un avocat validateur</span>
                            </div>
                            <div *ngIf="listAvocat.length == 0">
                                <p>Aucun avocat validateur désigné pour l’acte</p>
                            </div>
                            <div *ngFor="let item of listAvocat; let last = last; let index = index" class="responsive-contacts-row">
                                <div class="hidden-xs large-contacts-row">

                                    <div class="col-md-4 pl-0 truncate-txt">
                                        <label *ngIf="(currentActe.status!='En cours de signature' || item.validator) && !(item.validator==true && item.mailSent==true && item.actId == currentActe.id)" class="pure-material-checkbox">
                                            <input #inputElAv type="checkbox" [disabled]="disabledCheckBox(item)==true" [checked]="item.validator==true && item.mailSent==true && item.actId == currentActe.id " (change)="item.validator=inputElAv.checked">
                                            <span></span>
                                        </label>
                                        <img alt="" src="/logo/moral.svg">
                                        <span tooltip=" {{item.lastName.charAt(0).toUpperCase()+item.lastName.slice(1)}} {{item.name | uppercase}}" placement="top" show-delay="200">
                                           <span class="capitalize-text">{{item.lastName}}</span> {{item.name | uppercase}}
                                        </span>
                                    </div>
                                    <p class="col-md-2" *ngIf="item.validator==true && item.mailSent==true && item.actId == currentActe.id ">Validateur</p>
                                    <p class="col-md-4" [innerHTML]=dateValidatedOrRefused(item)> </p>
                                    <p class="col-md-4" [innerHTML]=""></p>
                                    <div class="col-md-2">
                                        <div class="pull-right" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status !='Cree'" [ngClass]="{'col-md-1': currentActe.status=='En cours de validation' || currentActe.status=='En cours de signature'}">
                                            <img alt="" src="/logo/options.svg" (click)="showDropdown('myDropdown2' + item.email)" class="cursor-pointer" />
                                            <div id="myDropdown2" class="dropdown-content" style="cursor:pointer; width: 170px;margin-left: -145px" [attr.id]="'myDropdown2' + item.email" *ngIf="readyOnlyForUser==true">
                                                <a [ngClass]="{'isDisabled': currentActe.status=='En cours de validation' && item.validatedAt }" *ngIf="!(disabledResent(item)==false || currentActe.status!='En cours de validation') && item.mailSent" (click)="showDropdown('myDropdown' + item.email);sendMailRelance(item)" style="float:left;cursor:pointer;font-size: 12px;">Relancer pour validation</a>
                                                <!--                                            <a [ngClass]="{'isDisabled': (currentActe.status=='En cours de signature' && isAvocat(item)) ||(currentActe.status=='En cours de signature' && item.signedAt)}" *ngIf="currentActe.status=='En cours de signature'" (click)="showDropdown('myDropdown' + item.email)" style="cursor:pointer;font-size: 12px;float: left">Relancer pour signature</a>-->
                                                <a *ngIf="!(disabledCheckBox(item)==true || currentActe.status=='En cours de signature')" (click)="showDropdown('myDropdown' + item.email);deleteAvocatPopup()"style="float:left;cursor:pointer;font-size: 12px;" attr.data-target="#idAvocat{{item.id}}" data-toggle="modal">Supprimer l'avocat</a>
                                            </div>
                                        </div>
                                        <div *ngIf="currentActe.status=='Cree' " class="pull-right">
                                            <span [inlineSVG]="'/logo/edit.svg'" (click)="avocatToModify(item);displayModalAvocat=true;displayModalSignataire=false"></span>
                                            <span [inlineSVG]="'/logo/delete.svg'" (click)="deleteAvocat(item)"></span>
                                        </div>
                                        <div class="pull-right ">
                                            <img alt="" src="/logo/down.svg" data-toggle="collapse" attr.data-target="#{{item.id}}" style="cursor:pointer">
                                        </div>

                                    </div>

                                </div>
                                <div class="modal fade" id="idAvocat{{item.id}}" role="dialog" *ngIf="displayPopupForDeleteCouncel==true" data-backdrop="static" data-keyboard="false"  style="display: none;">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div style="text-align:center">
                                                <div class="modal-body Votre-dossier-dacte " style="text-align:center;height: auto;margin-left: 34px;margin-top: 100px;">
                                                    Êtes-vous sûr de vouloir supprimer {{item.name}} ?
                                                    <div style="text-align:center;margin-top: 10%;">
                                                        <button form="information" type="submit" class="btn  next-button" (click)="deleteAvocat(item)" style="margin-right: 5%;">Oui</button>
                                                        <button  form="information" type="button" class="btn  save-button" (click)="displayConsultOrder=true" data-dismiss="modal">Retour</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="visible-xs-block xs-contacts-row container-fluid">
                                    <div class="row">
                                        <div class="col-xs-5 truncate-txt">
                                            <div style="display: inline-block">
                                                <label *ngIf="currentActe.status!='En cours de signature' || item.validator" class="pure-material-checkbox">
                                                    <input #inputElAv type="checkbox" [disabled]="disabledCheckBox(item)==true" [checked]="item.validator==true && item.mailSent==true && item.actId == currentActe.id " (change)="item.validator=inputElAv.checked">
                                                <span></span>
                                                </label>
                                            </div>
                                            <div style="display: contents">
                                                    <span tooltip=" {{item.lastName | titlecase}} {{item.name | uppercase}}" placement="top" show-delay="200">
                                                       <span class="capitalize-text">{{item.lastName}}</span> {{item.name | uppercase}}
                                                    </span>
                                            </div>

                                        </div>
                                        <div class="col-xs-5 ">
                                            <span class="col-md-4" [innerHTML]=dateValidatedOrRefused(item)> </span>
                                        </div>
                                        <div class="col-xs-1">
                                            <div *ngIf="dateSigneddOrRefused(item).length !='' " style="margin-top:5px;">
                                                <img alt="" src="/logo/down.svg" data-toggle="collapse" attr.data-target="#{{item.name}}">
                                            </div>
                                        </div>
                                        <div class="pull-right p-relative" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status =='Cree'">
                                            <img alt="" src="/logo/options.svg" (click)="showDropdown('dropdownAvocat2' + item.email)" class="cursor-pointer" />
                                            <div id="dropdownAvocat2" class="dropdown-content" style="cursor:pointer;margin-left: -66px" [attr.id]="'dropdownAvocat2' + item.email">
                                                <a (click)="avocatToModify(item);displayModalAvocat=true;displayModalSignataire=false">Modifier </a>
                                                <a *ngIf="!(disabledCheckBox(item)==true || currentActe.status=='En cours de signature')" (click)="showDropdown('myDropdown' + item.email);deleteAvocat(item)" style="float:left;cursor:pointer;font-size: 12px;">Supprimer</a>
                                            </div>
                                        </div>
                                        <div class="pull-right" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status=='En cours de signature'">
                                            <img alt="" src="/logo/down.svg" data-toggle="collapse" attr.data-target="#{{item.id}}" style="cursor:pointer;margin-left: -61px">
                                        </div>
                                        <div class="pull-right" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status =='Cree'">
                                            <img alt="" src="/logo/down.svg" data-toggle="collapse" attr.data-target="#{{item.id}}" style="cursor:pointer;margin-left: -33px;">
                                        </div>
                                        <div class="col-xs-1 pr-0 pl-0" *ngIf="userConnected.roles[0]!='ROLE_COUNSEL' && currentActe.status !='Cree'" [ngClass]="{'col-md-1': currentActe.status=='En cours de validation' || currentActe.status=='En cours de signature'}">
                                            <img alt="" src="/logo/options.svg" (click)="showDropdown('resAvocatmyDropdown' + item.email)" class="cursor-pointer" />
                                            <div id="resAvocatmyDropdown" class="dropdown-content" style="cursor:pointer; width: 160px;margin-left: -137px" [attr.id]="'resAvocatmyDropdown' + item.email" *ngIf="readyOnlyForUser==true">
                                                <a [ngClass]="{'isDisabled': currentActe.status=='En cours de validation' && item.validatedAt }" *ngIf="!(disabledResent(item)==false || currentActe.status!='En cours de validation') && item.mailSent" (click)="showDropdown('myDropdown' + item.email);sendMailRelance(item)" style="float:left;cursor:pointer;font-size: 12px;">Relancer pour validation</a>
                                                <!--                                            <a [ngClass]="{'isDisabled': (currentActe.status=='En cours de signature' && isAvocat(item)) ||(currentActe.status=='En cours de signature' && item.signedAt)}" *ngIf="currentActe.status=='En cours de signature'" (click)="showDropdown('myDropdown' + item.email)" style="cursor:pointer;font-size: 12px;float: left">Relancer pour signature</a>-->
                                                <a *ngIf="!(disabledCheckBox(item)==true || currentActe.status=='En cours de signature')" (click)="showDropdown('myDropdown' + item.email);deleteAvocatPopup()"style="float:left;cursor:pointer;font-size: 12px;" attr.data-target="#idAvocat{{item.id}}" data-toggle="modal">Supprimer l'avocat</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="{{item.id}}" class="collapse-info collapse">
                                    <div class="row p-10">
                                        <div class="col-md-3 col-xs-6">
                                            <span class="responsive-info-shift">{{item.codeCountry}} {{item.phoneNumber}}</span>
                                        </div>
                                        <div class="col-md-4 truncate-txt col-xs-6">
                                            <span tooltip=" {{item.email}}" placement="top" show-delay="200"> {{item.email}} </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-30" *ngIf="(listDocument.length != 0) ||(listDocument.length != 0 && currentActe.status=='En cours de validation') ||(listDocument.length != 0 && currentActe.status=='En cours de signature')">
                            <span class="synth-section-title">Documents</span>
                            <div class="docs-list" *ngIf="listDocument.length!=0;">
                                <div class="docs-list-header">
                                    <img src="/logo/active-unfocused.png" alt="document" class="mr-10" />
                                    <span>
                                        Mes Document(s)
                                    </span>
                                    <span class="pull-right cursor-pointer doc-list-action-icons">
                                        <span [inlineSVG]="'/logo/download.svg'" (click)="downloadAllDocument()"></span>
                                    </span>
                                </div>
                                <div class="docs-list-content">
                                    <div *ngFor="let file of listDocument;let i=index;" class="docs-list-row">
                                        <div class="truncate-txt">
                                            <span [style.pointer-events]="i==0?'none':'auto'" [style.opacity]="i==0?0.5:1" style="cursor : pointer" *ngIf="listDocument.length>1 && currentActe.status=='Cree'" [inlineSVG]="'/logo/up.svg'" (click)="upDocumentPosition(file)"></span>
                                            <span style="cursor : pointer" *ngIf="listDocument.length>1 && currentActe.status=='Cree'" [inlineSVG]="'/logo/down-file.svg'" (click)="downDocumentPosition(file)"></span>
                                            <span class="docs-list-title">{{file.name}}.pdf</span>
                                        </div>
                                        <div class="file-size pl-10">
                                            {{getFileSize(file.name) | number}} MO
                                        </div>
                                        <div class="doc-list-action-icons">
                                            <span class="hidden-xs" [inlineSVG]="'/logo/oeil.svg'" (click)="viewPdf(file)"></span>
                                            <span>
                                                <a (click)=downloadPDF(file) title={{file.name}} class="c-black">
                                                    <span [inlineSVG]="'/logo/download.svg'"></span>
                                                </a>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class=" add-form-actions">
                        <button *ngIf="currentActe.status!='En cours de signature'" [disabled]="!canReSendToValidation && readyOnlyForUser" form="information" type="submit" class="btn next-button" data-target="#modalSendToValidation" data-toggle="modal">Envoyer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade custom-confirm-modal1" id="modalSendToValidation" tabindex="-1" aria-labelledby="gridModalLabel" role="dialog" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">


            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <h1 class="custom-m-title">Votre acte sera envoyé pour validation</h1>
                <p class="custom-m-desc">L'acte, une fois validé par l'ensemble des validateurs, sera envoyé automatiquement aux Signataire(s).</p>
                <div class="custom-m-actions">
                    <button type="submit" class="btn  save-button" data-dismiss="modal" aria-hidden="true">
                        Annuler
                    </button>
                    <button type="button" class="btn  next-button" (click)="setContactToValidator();changeDocumentPosition();" data-dismiss="modal">Oui</button>
                </div>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="dismissActeModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" style="">
            <button type="button" style="margin-right: 21px;margin-top: 11px;" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <div class="modal-body Votre-dossier-dacte " style="text-align:center;margin-top: 50px;margin-bottom: 30px;">
               Êtes-vous sûr de vouloir abandonner l’acte? Cette action est irréversible. Toutefois, l'acte restera disponible pour consultation sur votre espace sauf si vous le supprimez.
            </div>
            <div style="text-align:center;margin-bottom: 50px;">
                <button form="information" type="submit" class="btn  save-button" style="margin-right:36px" (click)="vm.dismissActe(currentActe)" data-dismiss="modal">Oui</button>
                <button form="information" type="button" class="btn  next-button" data-dismiss="modal" aria-hidden="true">Non</button>
            </div>
        </div>
    </div>
</div>
